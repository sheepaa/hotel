{"remainingRequest":"/Users/kyy/Documents/ooad/酒店/hotel/front/node_modules/_vue-loader@15.10.1@vue-loader/lib/index.js??vue-loader-options!/Users/kyy/Documents/ooad/酒店/hotel/front/src/views/findroom.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/kyy/Documents/ooad/酒店/hotel/front/src/views/findroom.vue","mtime":1669698564934},{"path":"/Users/kyy/Documents/ooad/酒店/hotel/front/node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/kyy/Documents/ooad/酒店/hotel/front/node_modules/_babel-loader@8.3.0@babel-loader/lib/index.js","mtime":456789000000},{"path":"/Users/kyy/Documents/ooad/酒店/hotel/front/node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/kyy/Documents/ooad/酒店/hotel/front/node_modules/_vue-loader@15.10.1@vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["\nimport footbar from \"@/components/footbar.vue\";\nimport { clearScreenDown } from \"readline\";\nimport store from \"./../store\";\n\nexport default {\n  data() {\n    return {\n      // hotel_name = this.$route.query.\n      dialogVisible: false,\n      dialogVisibleInfo: false, //查看详情\n      today: \"\",\n      tomorrow: \"\",\n      displayInfo: {\n        Square: \"\",\n        Floor: \"\",\n        WIFI: \"\",\n        Window: \"\",\n        Smoking: \"\",\n      },\n      form: {\n        comedate: \"\",\n        leavedate: \"\",\n        currentDate: new Date(),\n      },\n      listdata: [\n        {\n          room_type: \"大床房\",\n          // intro: \"good\",\n          price: 1000,\n          Intro: {\n            Square: \"1\",\n            Floor: \"2\",\n            WIFI: \"3\",\n            Window: \"4\",\n            Smoking: \"5\",\n          },\n        },\n        {\n          room_type: \"双床房\",\n          // intro: \"good\",\n          price: 100,\n          Intro: {\n            Square: \"2\",\n            Floor: \"3\",\n            WIFI: \"4\",\n            Window: \"5\",\n            Smoking: \"6\",\n          },\n        },\n      ],\n    };\n  },\n  components: {\n    footbar,\n  },\n\n  methods: {\n    clickDisplayInfo(room) {\n      console.log(room.Intro.Square);\n      this.dialogVisibleInfo = true;\n      // console.log(\"we\")\n      this.displayInfo = room.Intro;\n    },\n    // showroom() {\n    //   console.log(123);\n    //   this.roomVisible = true;\n    // },\n    searchBtn() {\n      console.log(this.changeTimeStr(this.form.comedate));\n      if (this.form.comedate == \"\" || this.form.leavedate == \"\") {\n        this.dialogVisible = true;\n        return;\n      }\n      this.$store.commit(\"setDate\", [this.form.comedate, this.form.leavedate]);\n\n      this.$axios\n        .post(\"http://localhost:9091/customer/select4\", {\n          hotel_name: this.$store.state.hotelName,\n          start: this.changeTimeStr(this.form.comedate),\n          end: this.changeTimeStr(this.form.leavedate),\n        })\n\n        .then((res) => {\n          this.listdata = res.data;\n        })\n        .catch(() => {\n          console.log(\"error\");\n        });\n    },\n    //日期 -> 字符串\n    changeTimeStr(str) {\n      str = str.toString();\n      str = str.replace(/ GMT.+$/, \"\"); // Or str = str.substring(0, 24)\n      let d = new Date(str);\n      let a = [\n        d.getFullYear(),\n        d.getMonth() + 1,\n        d.getDate(),\n        d.getHours(),\n        d.getMinutes(),\n        d.getSeconds(),\n      ];\n      for (var i = 0, len = a.length; i < len; i++) {\n        if (a[i] < 10) {\n          a[i] = \"0\" + a[i];\n        }\n      }\n      str = a[0] + \"-\" + a[1] + \"-\" + a[2] + \" \" + a[3] + \":\" + a[4];\n      return str;\n    },\n    getDate: function () {\n      var _this = this;\n      let yy = new Date().getFullYear();\n      let mm = new Date().getMonth() + 1;\n      let dd = new Date().getDate();\n      let hh = new Date().getHours();\n      let mf =\n        new Date().getMinutes() < 10\n          ? \"0\" + new Date().getMinutes()\n          : new Date().getMinutes();\n      this.today = yy + \"-\" + mm + \"-\" + dd + \" \" + hh + \":\" + mf;\n      this.tomorrow = yy + \"-\" + mm + \"-\" + (dd + 1) + \" \" + hh + \":\" + mf;\n    },\n    // 保存信息并且跳转到订房\n    toOrder(room) {\n      console.log(\"in\")\n      let hotel_name = this.$store.state.hotelName;\n      let room_type = room.room_type;\n      let start = this.form.comedate;\n      let end = this.form.leavedate;\n      this.$store.commit(\"setOrder\",[hotel_name, room_type,start,end])\n      console.log(this.$store.state.order.roomType)\n      this.$router.push(\"/reservation-c\");\n    },\n    // unity() {\n    //   this.$axios\n    //     .get(\"http://localhost:9091/customer/view/1\")\n    //     .then(\n    //       (res) => {\n    //         this.listdata = res.data;\n    //         console.log(this.listdata);\n    //         alert(\"wow\");\n    //       },\n    //       (error) => {\n    //         console.log(\"fail\", error);\n    //       }\n    //     )\n    //     .catch((res) => {\n    //       console.log(res);\n    //     });\n    // },\n  },\n\n  mounted() {\n    this.getDate();\n\n    this.$store.commit(\"setDate\", [this.today, this.tomorrow]);\n    console.log(this.$store.state.order.start);\n    console.log(this.$store.state.order.end);\n    console.log(\"end\");\n    this.$axios\n      .post(\"http://localhost:9091/customer/select4\", {\n        hotel_name: this.$store.state.hotelName,\n        start: this.today,\n        end: this.tomorrow,\n      })\n      .then(\n        (res) => {\n          this.listdata = res.data;\n        },\n        (error) => {\n          console.log(\"fail\", error);\n        }\n      )\n      .catch((res) => {\n        console.log(res);\n      });\n  },\n};\n",{"version":3,"sources":["findroom.vue"],"names":[],"mappings":";AA4JA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"findroom.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div>\n    <el-container class=\"wrapper\">\n      <!-- <el-header class=\"header\">找房</el-header> -->\n      <el-main class=\"section\">\n        <div class=\"bg-header\"></div>\n        <el-card class=\"box-card pb-1\">\n          <div class=\"text item\">\n            <el-row>\n              <el-col :span=\"16\">\n                <p class=\"text-left\">\n                  <i class=\"el-icon-location-outline\"></i>\n                  {{ $store.state.hotelName }}\n                </p>\n              </el-col>\n              <!-- 回到findhotel -->\n              <el-col :span=\"8\">\n                <p class=\"text-right\">\n                  选择位置<i class=\"el-icon-arrow-right\"></i>\n                </p>\n              </el-col>\n            </el-row>\n\n            <el-form ref=\"form\" :model=\"form\">\n              <el-row :gutter=\"20\">\n                <el-col :span=\"12\">\n                  <el-form-item label=\"入住时间\">\n                    <el-date-picker\n                      type=\"date\"\n                      placeholder=\"选择日期\"\n                      v-model=\"form.comedate\"\n                      style=\"width: 100%\"\n                      :options=\"$datePickerOptions\"\n                      value-format=\"yyyy-MM-dd\"\n                    ></el-date-picker>\n                  </el-form-item>\n                </el-col>\n                <el-col :span=\"12\">\n                  <el-form-item label=\"离店时间\">\n                    <el-date-picker\n                      type=\"date\"\n                      placeholder=\"选择日期\"\n                      v-model=\"form.leavedate\"\n                      style=\"width: 100%\"\n                      :options=\"$datePickerOptions\"\n                      value-format=\"yyyy-MM-dd\"\n                    ></el-date-picker>\n                  </el-form-item>\n                </el-col>\n              </el-row>\n\n              <el-form-item>\n                <el-button\n                  type=\"primary\"\n                  icon=\"el-icon-search\"\n                  class=\"btn-block\"\n                  @click=\"searchBtn\"\n                  >查找空余房间\n                </el-button>\n              </el-form-item>\n            </el-form>\n          </div>\n        </el-card>\n\n        <el-row class=\"mt-1\">\n          <el-card class=\"mb-1 ml-1 mr-1\">\n            <div class=\"text item\">\n              <el-button type=\"primary\" @click=\"unity\"\n                >点击查看客房模型</el-button\n              >\n            </div>\n          </el-card>\n\n          <!-- TODO: 调整显示格式 -->\n          <el-col\n            :span=\"22\"\n            v-for=\"(room, index) in listdata\"\n            :key=\"index\"\n            :offset=\"1\"\n            class=\"mb-1\"\n          >\n            <el-card :body-style=\"{ padding: '0px' }\">\n              <el-row>\n                <el-col :span=\"8\">\n                  <img :src=\"room.coverImage\" class=\"image\" />\n                </el-col>\n                <el-col :span=\"8\">\n                  <div style=\"padding: 14px\" class=\"text-left room\">\n                    <p class=\"room-title\">\n                      {{ room.room_type }}\n                    </p>\n                    <!-- <p class=\"room-intro\">{{ room.intro }}</p> -->\n                    <p class=\"room-price\">￥{{ room.price }}</p>\n                  </div>\n                </el-col>\n                <el-col :span=\"8\" style=\"margin-bottom: 5px\">\n                  <el-row align=\"center\">\n                    <el-button\n                      type=\"primary\"\n                      plain\n                      @click=\"clickDisplayInfo(room)\"\n                      >查看详情</el-button\n                    >\n                  </el-row>\n                  <el-row>\n                    <el-button type=\"primary\" plain @click=\"toOrder(room)\"\n                      >订房</el-button\n                    >\n                  </el-row>\n\n                  <!-- <el-button type=\"primary\" plain>主要按钮</el-button> -->\n                </el-col>\n              </el-row>\n            </el-card>\n          </el-col>\n        </el-row>\n      </el-main>\n      <el-footer class=\"footer\">\n        <footbar></footbar>\n      </el-footer>\n      <el-dialog title=\"提示\" :visible.sync=\"dialogVisible\" width=\"95%\">\n        <span>您还没有选择完整的时间段！</span>\n        <span slot=\"footer\" class=\"dialog-footer\">\n          <el-button type=\"primary\" @click=\"dialogVisible = false\"\n            >确定</el-button\n          >\n        </span>\n      </el-dialog>\n\n      <el-dialog\n        title=\"房间详情\"\n        :visible.sync=\"dialogVisibleInfo\"\n        width=\"30%\"\n        :before-close=\"handleClose\"\n      >\n        <el-row type=\"flex\">\n          <el-col :span=\"12\">Square:{{ displayInfo.Square }}</el-col>\n          <el-col :span=\"12\">Floor:{{ displayInfo.Floor }}</el-col>\n        </el-row>\n        <el-row type=\"flex\">\n          <el-col :span=\"8\">WIFI:{{ displayInfo.WIFI }}</el-col>\n          <el-col :span=\"8\">Window:{{ displayInfo.Window }}</el-col>\n          <el-col :span=\"8\">Smoking:{{ displayInfo.Smoking }}</el-col>\n        </el-row>\n\n        <span slot=\"footer\" class=\"dialog-footer\">\n          <el-button type=\"primary\" @click=\"dialogVisibleInfo = false\"\n            >确 定</el-button\n          >\n        </span>\n      </el-dialog>\n    </el-container>\n  </div>\n</template>\n\n<script>\nimport footbar from \"@/components/footbar.vue\";\nimport { clearScreenDown } from \"readline\";\nimport store from \"./../store\";\n\nexport default {\n  data() {\n    return {\n      // hotel_name = this.$route.query.\n      dialogVisible: false,\n      dialogVisibleInfo: false, //查看详情\n      today: \"\",\n      tomorrow: \"\",\n      displayInfo: {\n        Square: \"\",\n        Floor: \"\",\n        WIFI: \"\",\n        Window: \"\",\n        Smoking: \"\",\n      },\n      form: {\n        comedate: \"\",\n        leavedate: \"\",\n        currentDate: new Date(),\n      },\n      listdata: [\n        {\n          room_type: \"大床房\",\n          // intro: \"good\",\n          price: 1000,\n          Intro: {\n            Square: \"1\",\n            Floor: \"2\",\n            WIFI: \"3\",\n            Window: \"4\",\n            Smoking: \"5\",\n          },\n        },\n        {\n          room_type: \"双床房\",\n          // intro: \"good\",\n          price: 100,\n          Intro: {\n            Square: \"2\",\n            Floor: \"3\",\n            WIFI: \"4\",\n            Window: \"5\",\n            Smoking: \"6\",\n          },\n        },\n      ],\n    };\n  },\n  components: {\n    footbar,\n  },\n\n  methods: {\n    clickDisplayInfo(room) {\n      console.log(room.Intro.Square);\n      this.dialogVisibleInfo = true;\n      // console.log(\"we\")\n      this.displayInfo = room.Intro;\n    },\n    // showroom() {\n    //   console.log(123);\n    //   this.roomVisible = true;\n    // },\n    searchBtn() {\n      console.log(this.changeTimeStr(this.form.comedate));\n      if (this.form.comedate == \"\" || this.form.leavedate == \"\") {\n        this.dialogVisible = true;\n        return;\n      }\n      this.$store.commit(\"setDate\", [this.form.comedate, this.form.leavedate]);\n\n      this.$axios\n        .post(\"http://localhost:9091/customer/select4\", {\n          hotel_name: this.$store.state.hotelName,\n          start: this.changeTimeStr(this.form.comedate),\n          end: this.changeTimeStr(this.form.leavedate),\n        })\n\n        .then((res) => {\n          this.listdata = res.data;\n        })\n        .catch(() => {\n          console.log(\"error\");\n        });\n    },\n    //日期 -> 字符串\n    changeTimeStr(str) {\n      str = str.toString();\n      str = str.replace(/ GMT.+$/, \"\"); // Or str = str.substring(0, 24)\n      let d = new Date(str);\n      let a = [\n        d.getFullYear(),\n        d.getMonth() + 1,\n        d.getDate(),\n        d.getHours(),\n        d.getMinutes(),\n        d.getSeconds(),\n      ];\n      for (var i = 0, len = a.length; i < len; i++) {\n        if (a[i] < 10) {\n          a[i] = \"0\" + a[i];\n        }\n      }\n      str = a[0] + \"-\" + a[1] + \"-\" + a[2] + \" \" + a[3] + \":\" + a[4];\n      return str;\n    },\n    getDate: function () {\n      var _this = this;\n      let yy = new Date().getFullYear();\n      let mm = new Date().getMonth() + 1;\n      let dd = new Date().getDate();\n      let hh = new Date().getHours();\n      let mf =\n        new Date().getMinutes() < 10\n          ? \"0\" + new Date().getMinutes()\n          : new Date().getMinutes();\n      this.today = yy + \"-\" + mm + \"-\" + dd + \" \" + hh + \":\" + mf;\n      this.tomorrow = yy + \"-\" + mm + \"-\" + (dd + 1) + \" \" + hh + \":\" + mf;\n    },\n    // 保存信息并且跳转到订房\n    toOrder(room) {\n      console.log(\"in\")\n      let hotel_name = this.$store.state.hotelName;\n      let room_type = room.room_type;\n      let start = this.form.comedate;\n      let end = this.form.leavedate;\n      this.$store.commit(\"setOrder\",[hotel_name, room_type,start,end])\n      console.log(this.$store.state.order.roomType)\n      this.$router.push(\"/reservation-c\");\n    },\n    // unity() {\n    //   this.$axios\n    //     .get(\"http://localhost:9091/customer/view/1\")\n    //     .then(\n    //       (res) => {\n    //         this.listdata = res.data;\n    //         console.log(this.listdata);\n    //         alert(\"wow\");\n    //       },\n    //       (error) => {\n    //         console.log(\"fail\", error);\n    //       }\n    //     )\n    //     .catch((res) => {\n    //       console.log(res);\n    //     });\n    // },\n  },\n\n  mounted() {\n    this.getDate();\n\n    this.$store.commit(\"setDate\", [this.today, this.tomorrow]);\n    console.log(this.$store.state.order.start);\n    console.log(this.$store.state.order.end);\n    console.log(\"end\");\n    this.$axios\n      .post(\"http://localhost:9091/customer/select4\", {\n        hotel_name: this.$store.state.hotelName,\n        start: this.today,\n        end: this.tomorrow,\n      })\n      .then(\n        (res) => {\n          this.listdata = res.data;\n        },\n        (error) => {\n          console.log(\"fail\", error);\n        }\n      )\n      .catch((res) => {\n        console.log(res);\n      });\n  },\n};\n</script>\n\n<style scoped=\"scoped\">\n.box-card {\n  height: 30vh;\n  margin: -7rem 1rem 0;\n}\n\n.time {\n  font-size: 13px;\n  color: #999;\n}\n\n.bottom {\n  margin-top: 13px;\n  line-height: 12px;\n}\n\n.button {\n  padding: 0;\n  float: right;\n}\n\n/* .image {\n  width: 80%;\n  display: block;\n  padding: 1rem;\n  border: 1px solid transparent;\n  border-radius: 20px;\n} */\n\n.clearfix:before,\n.clearfix:after {\n  display: table;\n  content: \"\";\n}\n\n.clearfix:after {\n  clear: both;\n}\n\n.room p {\n  margin-bottom: 0.25rem;\n  margin-top: 0;\n}\n\n.room-title {\n  font-size: 1.2rem;\n  font-weight: bolder;\n  color: #303133;\n}\n\n.room-intro {\n  font-size: 0.9rem;\n  color: #606266;\n}\n\n.room-price {\n  font-size: 1.2rem;\n  color: #f56c6c;\n}\n\n.room-comment {\n  font-size: 0.8rem;\n  color: #909399;\n}\n\n.black {\n  color: #303133;\n}\n</style>\n"]}]}