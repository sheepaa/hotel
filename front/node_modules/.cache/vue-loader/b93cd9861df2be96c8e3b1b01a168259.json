{"remainingRequest":"/Users/kyy/Documents/ooad/酒店/hotel/front/node_modules/_vue-loader@15.10.1@vue-loader/lib/index.js??vue-loader-options!/Users/kyy/Documents/ooad/酒店/hotel/front/src/views/search.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/kyy/Documents/ooad/酒店/hotel/front/src/views/search.vue","mtime":1669636725393},{"path":"/Users/kyy/Documents/ooad/酒店/hotel/front/node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/kyy/Documents/ooad/酒店/hotel/front/node_modules/_babel-loader@8.3.0@babel-loader/lib/index.js","mtime":456789000000},{"path":"/Users/kyy/Documents/ooad/酒店/hotel/front/node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/kyy/Documents/ooad/酒店/hotel/front/node_modules/_vue-loader@15.10.1@vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n  import footbar from \"@/components/footbar.vue\";\n  export default {\n    data() {\n      return {\n        form: {\n          indate: '',\n          leavedate: '',\n          currentDate: new Date()\n        },\n        \n        searchSet: [],\n        len: '',\n      }\n    },\n    components: {\n      footbar,\n    },\n    methods: {\n      searchBtn() {\n        this.axios.post(\"http://localhost:8090/user/listRoom\", {\n            \"inTime\": this.changeTimeStr(this.form.indate),\n            \"leaveTime\": this.changeTimeStr(this.form.leavedate)\n          })\n          .then(res => {\n            this.$store.state.searchSet = res.data.data;\n            this.$store.state.searchTime.inTime = this.changeTimeStr(this.form.indate);\n            this.$store.state.searchTime.leaveTime = this.changeTimeStr(this.form.leavedate);\n            this.updateWaterFall();\n\t\t\t\t\t\tthis.updateTime();\n          })\n          .catch(() => {\n            console.log(\"error\");\n          })\n      },\n      updateWaterFall() {\n        this.searchSet = this.$store.state.searchSet;\n        console.log(this.searchSet)\n        this.len = this.searchSet.length;\n        // for (let i in this.searchSet) {\n        //   if (i <= this.len / 2) {\n        //     this.showlist1.push(this.searchSet[i]);\n        //   } else {\n        //     this.showlist2.push(this.searchSet[i]);\n        //   }\n        // }\n        // console.log(this.showlist1, this.showlist2);\n        this.form.indate = this.$store.state.searchTime.inTime;\n        this.form.leavedate = this.$store.state.searchTime.leaveTime;\n      },\n      changeTimeStr(str) {\n        str = str.toString();\n        str = str.replace(/ GMT.+$/, ''); // Or str = str.substring(0, 24)\n        let d = new Date(str);\n        let a = [d.getFullYear(), d.getMonth() + 1, d.getDate(), d.getHours(), d.getMinutes(), d.getSeconds()];\n        for (var i = 0, len = a.length; i < len; i++) {\n          if (a[i] < 10) {\n            a[i] = '0' + a[i];\n          }\n        }\n        str = a[0] + '-' + a[1] + '-' + a[2] + ' ' + a[3] + ':' + a[4];\n        return str;\n      },\n      toDetail(id) {\n        this.$router.push(\"/detail?roomId=\" + id);\n      },\n\t\t\tupdateTime() {\n\t\t\t\tthis.$store.state.bookstat.inTime = this.changeTimeStr(this.form.indate);\n\t\t\t\tthis.$store.state.bookstat.leaveTime = this.changeTimeStr(this.form.leavedate);\n\t\t\t}\n    },\n    mounted() {\n      this.updateWaterFall();\n\t\t\tthis.updateTime();\n    }\n  }\n",{"version":3,"sources":["search.vue"],"names":[],"mappings":";AAuFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"search.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div>\n    <el-container class=\"wrapper\">\n      <el-main class=\"section text-left\">\n        <el-card class=\"box-card p-box\" shadow=\"never\">\n          <div class=\"text item\">\n            <el-row :gutter=\"10\">\n              <el-col :span=\"18\">\n                <el-form label-position=\"left\" ref=\"form\" :model=\"form\">\n                  <el-row :gutter=\"10\">\n                    <el-col :span=\"12\">\n                      <el-date-picker type=\"datetime\" placeholder=\"入住时间\" v-model=\"form.indate\" style=\"width: 100%;\"></el-date-picker>\n                    </el-col>\n                    <el-col :span=\"12\">\n                      <el-date-picker type=\"datetime\" placeholder=\"离店时间\" v-model=\"form.leavedate\" style=\"width: 100%;\"></el-date-picker>\n                    </el-col>\n                  </el-row>\n                </el-form>\n              </el-col>\n              <el-col :span=\"6\">\n                <el-button type=\"primary\" icon=\"el-icon-search\" class=\"btn-block\" @click=\"searchBtn\"></el-button>\n              </el-col>\n            </el-row>\n            <el-row class=\"mt-1\">\n              <el-col :span=\"24\">\n                <span class=\"search-info\">\n                  在您提供的时间段内，共查找到 <span class=\"search-num\">{{len}}</span> 条结果\n                </span>\n              </el-col>\n            </el-row>\n          </div>\n        </el-card>\n        <el-row>\n          <el-col :span=\"12\">\n            <el-row>\n              <el-col :span=\"24\" v-for=\"(room, index) in searchSet\" :key=\"index\" :offset=\"0\">\n                <el-card shadow=\"never\" :body-style=\"{ padding: '0px' }\">\n                  <div @click=\"toDetail(room.id)\">\n                    <img :src=\"room.type.coverImage\" class=\"image\">\n                  </div>\n                  <div style=\"padding: 14px;\">\n                    <div @click=\"toDetail(room.id)\">\n                      <p class=\"search-title\">\n                        房间{{room.number}}\n                        ：\n                        {{room.type.typeName}}\n                      </p>\n                    </div>\n                    <p class=\"search-price\">￥{{room.type.price}}</p>\n                    <p class=\"search-comment\">{{room.type.feature}}</p>\n                  </div>\n                </el-card>\n              </el-col>\n            </el-row>\n          </el-col>\n          <el-col :span=\"12\">\n            <el-row>\n              <el-col :span=\"24\" v-for=\"(room, index) in showlist2\" :key=\"index\" :offset=\"0\">\n                <el-card shadow=\"never\" :body-style=\"{ padding: '0px' }\">\n                  <div @click=\"toDetail(room.id)\">\n                    <img :src=\"room.type.coverImage\" class=\"image\">\n                  </div>\n                  <div style=\"padding: 14px;\">\n                    <div @click=\"toDetail(room.id)\">\n                      <p class=\"search-title\">\n                        房间{{room.number}}\n                        ：\n                        {{room.type.typeName}}\n                      </p>\n                    </div>\n                    <p class=\"search-price\">￥{{room.type.price}}</p>\n                    <p class=\"search-comment\">{{room.type.feature}}</p>\n                  </div>\n                </el-card>\n              </el-col>\n            </el-row>\n          </el-col>\n        </el-row>\n      </el-main>\n      <el-footer class=\"footer\">\n        <footbar></footbar>\n      </el-footer>\n    </el-container>\n  </div>\n</template>\n\n<script>\n  import footbar from \"@/components/footbar.vue\";\n  export default {\n    data() {\n      return {\n        form: {\n          indate: '',\n          leavedate: '',\n          currentDate: new Date()\n        },\n        \n        searchSet: [],\n        len: '',\n      }\n    },\n    components: {\n      footbar,\n    },\n    methods: {\n      searchBtn() {\n        this.axios.post(\"http://localhost:8090/user/listRoom\", {\n            \"inTime\": this.changeTimeStr(this.form.indate),\n            \"leaveTime\": this.changeTimeStr(this.form.leavedate)\n          })\n          .then(res => {\n            this.$store.state.searchSet = res.data.data;\n            this.$store.state.searchTime.inTime = this.changeTimeStr(this.form.indate);\n            this.$store.state.searchTime.leaveTime = this.changeTimeStr(this.form.leavedate);\n            this.updateWaterFall();\n\t\t\t\t\t\tthis.updateTime();\n          })\n          .catch(() => {\n            console.log(\"error\");\n          })\n      },\n      updateWaterFall() {\n        this.searchSet = this.$store.state.searchSet;\n        console.log(this.searchSet)\n        this.len = this.searchSet.length;\n        // for (let i in this.searchSet) {\n        //   if (i <= this.len / 2) {\n        //     this.showlist1.push(this.searchSet[i]);\n        //   } else {\n        //     this.showlist2.push(this.searchSet[i]);\n        //   }\n        // }\n        // console.log(this.showlist1, this.showlist2);\n        this.form.indate = this.$store.state.searchTime.inTime;\n        this.form.leavedate = this.$store.state.searchTime.leaveTime;\n      },\n      changeTimeStr(str) {\n        str = str.toString();\n        str = str.replace(/ GMT.+$/, ''); // Or str = str.substring(0, 24)\n        let d = new Date(str);\n        let a = [d.getFullYear(), d.getMonth() + 1, d.getDate(), d.getHours(), d.getMinutes(), d.getSeconds()];\n        for (var i = 0, len = a.length; i < len; i++) {\n          if (a[i] < 10) {\n            a[i] = '0' + a[i];\n          }\n        }\n        str = a[0] + '-' + a[1] + '-' + a[2] + ' ' + a[3] + ':' + a[4];\n        return str;\n      },\n      toDetail(id) {\n        this.$router.push(\"/detail?roomId=\" + id);\n      },\n\t\t\tupdateTime() {\n\t\t\t\tthis.$store.state.bookstat.inTime = this.changeTimeStr(this.form.indate);\n\t\t\t\tthis.$store.state.bookstat.leaveTime = this.changeTimeStr(this.form.leavedate);\n\t\t\t}\n    },\n    mounted() {\n      this.updateWaterFall();\n\t\t\tthis.updateTime();\n    }\n  }\n</script>\n\n<style scoped=\"scoped\">\n  .time {\n    font-size: 13px;\n    color: #999;\n  }\n\n  .bottom {\n    margin-top: 13px;\n    line-height: 12px;\n  }\n\n  .button {\n    padding: 0;\n    float: right;\n  }\n\n  .image {\n    width: 100%;\n    display: block;\n  }\n\n  .clearfix:before,\n  .clearfix:after {\n    display: table;\n    content: \"\";\n  }\n\n  .clearfix:after {\n    clear: both\n  }\n\n  .text {\n    font-size: 14px;\n  }\n\n  .item {\n    /* padding: 2px 0; */\n  }\n\n  .box-card {\n    width: 100vw;\n  }\n\n  /*  .el-card__body {\n    padding: 0 20px;\n  } */\n\n  .search-info {\n    font-size: 0.9rem;\n    color: #606266;\n  }\n\n  .search-num {\n    font-size: 1.1rem;\n    color: #409EFF;\n  }\n\n  .search-title {\n    font-weight: bold;\n    font-size: 1.2rem;\n    color: #303133;\n  }\n\n  .search-price {\n    font-size: 1.1rem;\n    color: #F56C6C;\n  }\n\n  .search-comment {\n    font-size: 0.9rem;\n    color: #909399;\n  }\n\n  p {\n    margin-top: 0;\n    margin-bottom: 0.3rem;\n  }\n</style>\n"]}]}